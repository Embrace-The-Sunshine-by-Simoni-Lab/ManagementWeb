{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _EventRow = _interopRequireDefault(require(\"../../EventRow\"));\n\nvar _Selection = _interopRequireWildcard(require(\"../../Selection\"));\n\nvar _eventLevels = require(\"../../utils/eventLevels\");\n\nvar _selection = require(\"../../utils/selection\");\n\nvar _common = require(\"./common\");\n\nvar _DnDContext = require(\"./DnDContext\");\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nvar WeekWrapper = /*#__PURE__*/function (_React$Component) {\n  (0, _inheritsLoose2.default)(WeekWrapper, _React$Component);\n\n  function WeekWrapper() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _this.handleMove = function (point, bounds, draggedEvent) {\n      if (!(0, _selection.pointInBox)(bounds, point)) return _this.reset();\n      var event = _this.context.draggable.dragAndDropAction.event || draggedEvent;\n      var _this$props = _this.props,\n          accessors = _this$props.accessors,\n          slotMetrics = _this$props.slotMetrics,\n          rtl = _this$props.rtl,\n          localizer = _this$props.localizer;\n      var slot = (0, _selection.getSlotAtX)(bounds, point.x, rtl, slotMetrics.slots);\n      var date = slotMetrics.getDateForSlot(slot); // Adjust the dates, but maintain the times when moving\n\n      var _eventTimes = (0, _common.eventTimes)(event, accessors, localizer),\n          start = _eventTimes.start,\n          duration = _eventTimes.duration;\n\n      start = localizer.merge(date, start);\n      var end = localizer.add(start, duration, 'milliseconds'); // LATER: when dragging a multi-row event, only the first row is animating\n\n      _this.update(event, start, end);\n    };\n\n    _this.handleDropFromOutside = function (point, bounds) {\n      if (!_this.context.draggable.onDropFromOutside) return;\n      var _this$props2 = _this.props,\n          slotMetrics = _this$props2.slotMetrics,\n          rtl = _this$props2.rtl,\n          localizer = _this$props2.localizer;\n      var slot = (0, _selection.getSlotAtX)(bounds, point.x, rtl, slotMetrics.slots);\n      var start = slotMetrics.getDateForSlot(slot);\n\n      _this.context.draggable.onDropFromOutside({\n        start: start,\n        end: localizer.add(start, 1, 'day'),\n        allDay: false\n      });\n    };\n\n    _this.handleDragOverFromOutside = function (point, node) {\n      if (!_this.context.draggable.dragFromOutsideItem) return;\n\n      _this.handleMove(point, node, _this.context.draggable.dragFromOutsideItem());\n    };\n\n    _this._selectable = function () {\n      var node = _this.ref.current.closest('.rbc-month-row, .rbc-allday-cell');\n\n      var container = node.closest('.rbc-month-view, .rbc-time-view');\n      var selector = _this._selector = new _Selection.default(function () {\n        return container;\n      });\n      selector.on('beforeSelect', function (point) {\n        var isAllDay = _this.props.isAllDay;\n        var action = _this.context.draggable.dragAndDropAction.action;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        var isInBox = (0, _selection.pointInBox)(bounds, point);\n        return action === 'move' || action === 'resize' && (!isAllDay || isInBox);\n      });\n      selector.on('selecting', function (box) {\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        var dragAndDropAction = _this.context.draggable.dragAndDropAction;\n        if (dragAndDropAction.action === 'move') _this.handleMove(box, bounds);\n        if (dragAndDropAction.action === 'resize') _this.handleResize(box, bounds);\n      });\n      selector.on('selectStart', function () {\n        return _this.context.draggable.onStart();\n      });\n      selector.on('select', function (point) {\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        if (!_this.state.segment) return;\n\n        if (!(0, _selection.pointInBox)(bounds, point)) {\n          _this.reset();\n        } else {\n          _this.handleInteractionEnd();\n        }\n      });\n      selector.on('dropFromOutside', function (point) {\n        if (!_this.context.draggable.onDropFromOutside) return;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        if (!(0, _selection.pointInBox)(bounds, point)) return;\n\n        _this.handleDropFromOutside(point, bounds);\n      });\n      selector.on('dragOverFromOutside', function (point) {\n        if (!_this.context.draggable.dragFromOutsideItem) return;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n\n        _this.handleDragOverFromOutside(point, bounds);\n      });\n      selector.on('click', function () {\n        return _this.context.draggable.onEnd(null);\n      });\n      selector.on('reset', function () {\n        _this.reset();\n\n        _this.context.draggable.onEnd(null);\n      });\n    };\n\n    _this.handleInteractionEnd = function () {\n      var _this$props3 = _this.props,\n          resourceId = _this$props3.resourceId,\n          isAllDay = _this$props3.isAllDay;\n      var event = _this.state.segment.event;\n\n      _this.reset();\n\n      _this.context.draggable.onEnd({\n        start: event.start,\n        end: event.end,\n        resourceId: resourceId,\n        isAllDay: isAllDay\n      });\n    };\n\n    _this._teardownSelectable = function () {\n      if (!_this._selector) return;\n\n      _this._selector.teardown();\n\n      _this._selector = null;\n    };\n\n    _this.state = {};\n    _this.ref = /*#__PURE__*/_react.default.createRef();\n    return _this;\n  }\n\n  var _proto = WeekWrapper.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this._selectable();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._teardownSelectable();\n  };\n\n  _proto.reset = function reset() {\n    if (this.state.segment) this.setState({\n      segment: null\n    });\n  };\n\n  _proto.update = function update(event, start, end) {\n    var segment = (0, _eventLevels.eventSegments)((0, _extends2.default)({}, event, {\n      end: end,\n      start: start,\n      __isPreview: true\n    }), this.props.slotMetrics.range, _common.dragAccessors, this.props.localizer);\n    var lastSegment = this.state.segment;\n\n    if (lastSegment && segment.span === lastSegment.span && segment.left === lastSegment.left && segment.right === lastSegment.right) {\n      return;\n    }\n\n    this.setState({\n      segment: segment\n    });\n  };\n\n  _proto.handleResize = function handleResize(point, bounds) {\n    var _this$context$draggab = this.context.draggable.dragAndDropAction,\n        event = _this$context$draggab.event,\n        direction = _this$context$draggab.direction;\n    var _this$props4 = this.props,\n        accessors = _this$props4.accessors,\n        slotMetrics = _this$props4.slotMetrics,\n        rtl = _this$props4.rtl,\n        localizer = _this$props4.localizer;\n\n    var _eventTimes2 = (0, _common.eventTimes)(event, accessors, localizer),\n        start = _eventTimes2.start,\n        end = _eventTimes2.end;\n\n    var slot = (0, _selection.getSlotAtX)(bounds, point.x, rtl, slotMetrics.slots);\n    var date = slotMetrics.getDateForSlot(slot);\n    var cursorInRow = (0, _selection.pointInBox)(bounds, point);\n\n    if (direction === 'RIGHT') {\n      if (cursorInRow) {\n        if (slotMetrics.last < start) return this.reset();\n        if (localizer.eq(localizer.startOf(end, 'day'), end)) end = localizer.add(date, 1, 'day');else end = date;\n      } else if (localizer.inRange(start, slotMetrics.first, slotMetrics.last) || bounds.bottom < point.y && +slotMetrics.first > +start) {\n        end = localizer.add(slotMetrics.last, 1, 'milliseconds');\n      } else {\n        this.setState({\n          segment: null\n        });\n        return;\n      }\n\n      var originalEnd = accessors.end(event);\n      end = localizer.merge(end, originalEnd);\n\n      if (localizer.lt(end, start)) {\n        end = originalEnd;\n      }\n    } else if (direction === 'LEFT') {\n      if (cursorInRow) {\n        if (slotMetrics.first > end) return this.reset();\n        start = date;\n      } else if (localizer.inRange(end, slotMetrics.first, slotMetrics.last) || bounds.top > point.y && localizer.lt(slotMetrics.last, end)) {\n        start = localizer.add(slotMetrics.first, -1, 'milliseconds');\n      } else {\n        this.reset();\n        return;\n      }\n\n      var originalStart = accessors.start(event);\n      start = localizer.merge(start, originalStart);\n\n      if (localizer.gt(start, end)) {\n        start = originalStart;\n      }\n    }\n\n    this.update(event, start, end);\n  };\n\n  _proto.render = function render() {\n    var _this$props5 = this.props,\n        children = _this$props5.children,\n        accessors = _this$props5.accessors;\n    var segment = this.state.segment;\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      ref: this.ref,\n      className: \"rbc-addons-dnd-row-body\"\n    }, children, segment && /*#__PURE__*/_react.default.createElement(_EventRow.default, (0, _extends2.default)({}, this.props, {\n      selected: null,\n      className: \"rbc-addons-dnd-drag-row\",\n      segments: [segment],\n      accessors: (0, _extends2.default)({}, accessors, _common.dragAccessors)\n    })));\n  };\n\n  return WeekWrapper;\n}(_react.default.Component);\n\nWeekWrapper.contextType = _DnDContext.DnDContext;\nWeekWrapper.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  isAllDay: _propTypes.default.bool,\n  slotMetrics: _propTypes.default.object.isRequired,\n  accessors: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  resourceId: _propTypes.default.any,\n  rtl: _propTypes.default.bool,\n  localizer: _propTypes.default.any\n} : {};\nvar _default = WeekWrapper;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/Users/zhaoyuliu/Desktop/matx-pro-3.3.0/node_modules/react-big-calendar/lib/addons/dragAndDrop/WeekWrapper.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_extends2","_inheritsLoose2","_propTypes","_react","_EventRow","_Selection","_interopRequireWildcard","_eventLevels","_selection","_common","_DnDContext","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","WeekWrapper","_React$Component","_this","_len","arguments","length","args","Array","_key","apply","concat","handleMove","point","bounds","draggedEvent","pointInBox","reset","event","context","draggable","dragAndDropAction","_this$props","props","accessors","slotMetrics","rtl","localizer","slot","getSlotAtX","x","slots","date","getDateForSlot","_eventTimes","eventTimes","start","duration","merge","end","add","update","handleDropFromOutside","onDropFromOutside","_this$props2","allDay","handleDragOverFromOutside","node","dragFromOutsideItem","_selectable","ref","current","closest","container","selector","_selector","on","isAllDay","action","getBoundsForNode","isInBox","box","handleResize","onStart","state","segment","handleInteractionEnd","onEnd","_this$props3","resourceId","_teardownSelectable","teardown","createRef","_proto","componentDidMount","componentWillUnmount","setState","eventSegments","__isPreview","range","dragAccessors","lastSegment","span","left","right","_this$context$draggab","direction","_this$props4","_eventTimes2","cursorInRow","last","eq","startOf","inRange","first","bottom","y","originalEnd","lt","top","originalStart","gt","render","_this$props5","children","createElement","className","selected","segments","Component","contextType","DnDContext","propTypes","process","env","NODE_ENV","bool","object","isRequired","getters","components","any","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _EventRow = _interopRequireDefault(require(\"../../EventRow\"));\n\nvar _Selection = _interopRequireWildcard(require(\"../../Selection\"));\n\nvar _eventLevels = require(\"../../utils/eventLevels\");\n\nvar _selection = require(\"../../utils/selection\");\n\nvar _common = require(\"./common\");\n\nvar _DnDContext = require(\"./DnDContext\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar WeekWrapper = /*#__PURE__*/function (_React$Component) {\n  (0, _inheritsLoose2.default)(WeekWrapper, _React$Component);\n\n  function WeekWrapper() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _this.handleMove = function (point, bounds, draggedEvent) {\n      if (!(0, _selection.pointInBox)(bounds, point)) return _this.reset();\n      var event = _this.context.draggable.dragAndDropAction.event || draggedEvent;\n      var _this$props = _this.props,\n          accessors = _this$props.accessors,\n          slotMetrics = _this$props.slotMetrics,\n          rtl = _this$props.rtl,\n          localizer = _this$props.localizer;\n      var slot = (0, _selection.getSlotAtX)(bounds, point.x, rtl, slotMetrics.slots);\n      var date = slotMetrics.getDateForSlot(slot); // Adjust the dates, but maintain the times when moving\n\n      var _eventTimes = (0, _common.eventTimes)(event, accessors, localizer),\n          start = _eventTimes.start,\n          duration = _eventTimes.duration;\n\n      start = localizer.merge(date, start);\n      var end = localizer.add(start, duration, 'milliseconds'); // LATER: when dragging a multi-row event, only the first row is animating\n\n      _this.update(event, start, end);\n    };\n\n    _this.handleDropFromOutside = function (point, bounds) {\n      if (!_this.context.draggable.onDropFromOutside) return;\n      var _this$props2 = _this.props,\n          slotMetrics = _this$props2.slotMetrics,\n          rtl = _this$props2.rtl,\n          localizer = _this$props2.localizer;\n      var slot = (0, _selection.getSlotAtX)(bounds, point.x, rtl, slotMetrics.slots);\n      var start = slotMetrics.getDateForSlot(slot);\n\n      _this.context.draggable.onDropFromOutside({\n        start: start,\n        end: localizer.add(start, 1, 'day'),\n        allDay: false\n      });\n    };\n\n    _this.handleDragOverFromOutside = function (point, node) {\n      if (!_this.context.draggable.dragFromOutsideItem) return;\n\n      _this.handleMove(point, node, _this.context.draggable.dragFromOutsideItem());\n    };\n\n    _this._selectable = function () {\n      var node = _this.ref.current.closest('.rbc-month-row, .rbc-allday-cell');\n\n      var container = node.closest('.rbc-month-view, .rbc-time-view');\n      var selector = _this._selector = new _Selection.default(function () {\n        return container;\n      });\n      selector.on('beforeSelect', function (point) {\n        var isAllDay = _this.props.isAllDay;\n        var action = _this.context.draggable.dragAndDropAction.action;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        var isInBox = (0, _selection.pointInBox)(bounds, point);\n        return action === 'move' || action === 'resize' && (!isAllDay || isInBox);\n      });\n      selector.on('selecting', function (box) {\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        var dragAndDropAction = _this.context.draggable.dragAndDropAction;\n        if (dragAndDropAction.action === 'move') _this.handleMove(box, bounds);\n        if (dragAndDropAction.action === 'resize') _this.handleResize(box, bounds);\n      });\n      selector.on('selectStart', function () {\n        return _this.context.draggable.onStart();\n      });\n      selector.on('select', function (point) {\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        if (!_this.state.segment) return;\n\n        if (!(0, _selection.pointInBox)(bounds, point)) {\n          _this.reset();\n        } else {\n          _this.handleInteractionEnd();\n        }\n      });\n      selector.on('dropFromOutside', function (point) {\n        if (!_this.context.draggable.onDropFromOutside) return;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n        if (!(0, _selection.pointInBox)(bounds, point)) return;\n\n        _this.handleDropFromOutside(point, bounds);\n      });\n      selector.on('dragOverFromOutside', function (point) {\n        if (!_this.context.draggable.dragFromOutsideItem) return;\n        var bounds = (0, _Selection.getBoundsForNode)(node);\n\n        _this.handleDragOverFromOutside(point, bounds);\n      });\n      selector.on('click', function () {\n        return _this.context.draggable.onEnd(null);\n      });\n      selector.on('reset', function () {\n        _this.reset();\n\n        _this.context.draggable.onEnd(null);\n      });\n    };\n\n    _this.handleInteractionEnd = function () {\n      var _this$props3 = _this.props,\n          resourceId = _this$props3.resourceId,\n          isAllDay = _this$props3.isAllDay;\n      var event = _this.state.segment.event;\n\n      _this.reset();\n\n      _this.context.draggable.onEnd({\n        start: event.start,\n        end: event.end,\n        resourceId: resourceId,\n        isAllDay: isAllDay\n      });\n    };\n\n    _this._teardownSelectable = function () {\n      if (!_this._selector) return;\n\n      _this._selector.teardown();\n\n      _this._selector = null;\n    };\n\n    _this.state = {};\n    _this.ref = /*#__PURE__*/_react.default.createRef();\n    return _this;\n  }\n\n  var _proto = WeekWrapper.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this._selectable();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._teardownSelectable();\n  };\n\n  _proto.reset = function reset() {\n    if (this.state.segment) this.setState({\n      segment: null\n    });\n  };\n\n  _proto.update = function update(event, start, end) {\n    var segment = (0, _eventLevels.eventSegments)((0, _extends2.default)({}, event, {\n      end: end,\n      start: start,\n      __isPreview: true\n    }), this.props.slotMetrics.range, _common.dragAccessors, this.props.localizer);\n    var lastSegment = this.state.segment;\n\n    if (lastSegment && segment.span === lastSegment.span && segment.left === lastSegment.left && segment.right === lastSegment.right) {\n      return;\n    }\n\n    this.setState({\n      segment: segment\n    });\n  };\n\n  _proto.handleResize = function handleResize(point, bounds) {\n    var _this$context$draggab = this.context.draggable.dragAndDropAction,\n        event = _this$context$draggab.event,\n        direction = _this$context$draggab.direction;\n    var _this$props4 = this.props,\n        accessors = _this$props4.accessors,\n        slotMetrics = _this$props4.slotMetrics,\n        rtl = _this$props4.rtl,\n        localizer = _this$props4.localizer;\n\n    var _eventTimes2 = (0, _common.eventTimes)(event, accessors, localizer),\n        start = _eventTimes2.start,\n        end = _eventTimes2.end;\n\n    var slot = (0, _selection.getSlotAtX)(bounds, point.x, rtl, slotMetrics.slots);\n    var date = slotMetrics.getDateForSlot(slot);\n    var cursorInRow = (0, _selection.pointInBox)(bounds, point);\n\n    if (direction === 'RIGHT') {\n      if (cursorInRow) {\n        if (slotMetrics.last < start) return this.reset();\n        if (localizer.eq(localizer.startOf(end, 'day'), end)) end = localizer.add(date, 1, 'day');else end = date;\n      } else if (localizer.inRange(start, slotMetrics.first, slotMetrics.last) || bounds.bottom < point.y && +slotMetrics.first > +start) {\n        end = localizer.add(slotMetrics.last, 1, 'milliseconds');\n      } else {\n        this.setState({\n          segment: null\n        });\n        return;\n      }\n\n      var originalEnd = accessors.end(event);\n      end = localizer.merge(end, originalEnd);\n\n      if (localizer.lt(end, start)) {\n        end = originalEnd;\n      }\n    } else if (direction === 'LEFT') {\n      if (cursorInRow) {\n        if (slotMetrics.first > end) return this.reset();\n        start = date;\n      } else if (localizer.inRange(end, slotMetrics.first, slotMetrics.last) || bounds.top > point.y && localizer.lt(slotMetrics.last, end)) {\n        start = localizer.add(slotMetrics.first, -1, 'milliseconds');\n      } else {\n        this.reset();\n        return;\n      }\n\n      var originalStart = accessors.start(event);\n      start = localizer.merge(start, originalStart);\n\n      if (localizer.gt(start, end)) {\n        start = originalStart;\n      }\n    }\n\n    this.update(event, start, end);\n  };\n\n  _proto.render = function render() {\n    var _this$props5 = this.props,\n        children = _this$props5.children,\n        accessors = _this$props5.accessors;\n    var segment = this.state.segment;\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      ref: this.ref,\n      className: \"rbc-addons-dnd-row-body\"\n    }, children, segment && /*#__PURE__*/_react.default.createElement(_EventRow.default, (0, _extends2.default)({}, this.props, {\n      selected: null,\n      className: \"rbc-addons-dnd-drag-row\",\n      segments: [segment],\n      accessors: (0, _extends2.default)({}, accessors, _common.dragAccessors)\n    })));\n  };\n\n  return WeekWrapper;\n}(_react.default.Component);\n\nWeekWrapper.contextType = _DnDContext.DnDContext;\nWeekWrapper.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  isAllDay: _propTypes.default.bool,\n  slotMetrics: _propTypes.default.object.isRequired,\n  accessors: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  resourceId: _propTypes.default.any,\n  rtl: _propTypes.default.bool,\n  localizer: _propTypes.default.any\n} : {};\nvar _default = WeekWrapper;\nexports.default = _default;\nmodule.exports = exports.default;"]},"metadata":{},"sourceType":"script"}