{"ast":null,"code":"import _toConsumableArray from \"/Users/zhaoyuliu/Desktop/matx-basic/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"/Users/zhaoyuliu/Desktop/matx-basic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/zhaoyuliu/Desktop/matx-basic/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/zhaoyuliu/Desktop/matx-basic/src/app/views/todo/TagDialog.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/zhaoyuliu/Desktop/matx-basic/node_modules/@babel/runtime/regenerator/index.js\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Dialog, TextField, Button } from '@mui/material';\nimport { getAllTodoTag, addNewTag, deleteTag } from './TodoService';\nimport { generateRandomId } from 'app/utils/utils';\nimport { Box, styled, useTheme } from '@mui/system';\nimport { Span } from 'app/components/Typography';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar FlexBox = styled(Box)(function () {\n  return {\n    display: 'flex',\n    alignItems: 'center'\n  };\n});\nvar JustifyBox = styled(FlexBox)(function () {\n  return {\n    justifyContent: 'space-between'\n  };\n});\n\nvar TagDialog = function TagDialog(_ref) {\n  _s();\n\n  var open = _ref.open,\n      handleClose = _ref.handleClose;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isAlive = _useState2[0],\n      setIsAlive = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      name = _useState4[0],\n      setName = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      tagList = _useState6[0],\n      setTagList = _useState6[1];\n\n  var loadTagList = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _yield$getAllTodoTag, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return getAllTodoTag();\n\n          case 2:\n            _yield$getAllTodoTag = _context.sent;\n            data = _yield$getAllTodoTag.data;\n            if (isAlive) setTagList(data);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [isAlive]);\n  useEffect(function () {\n    loadTagList();\n    return function () {\n      return setIsAlive(false);\n    };\n  }, [loadTagList]);\n  useEffect(function () {\n    return function () {\n      return setIsAlive(false);\n    };\n  }, []);\n\n  var handleChange = function handleChange(event) {\n    if (event.key === 'Enter') {\n      handleAddNewTag();\n    } else {\n      setName(event.target.value);\n    }\n  };\n\n  var handleAddNewTag = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n      var _yield$addNewTag, tag, list;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(name.trim() !== '')) {\n                _context2.next = 6;\n                break;\n              }\n\n              _context2.next = 3;\n              return addNewTag({\n                id: generateRandomId(),\n                name: name.trim()\n              });\n\n            case 3:\n              _yield$addNewTag = _context2.sent;\n              tag = _yield$addNewTag.data;\n\n              if (isAlive) {\n                list = _toConsumableArray(tagList);\n                list.push(tag);\n                setTagList(list);\n                setName('');\n              }\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleAddNewTag(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleDeleteTag = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      var list;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return deleteTag({\n                id: id,\n                name: name\n              });\n\n            case 2:\n              if (isAlive) {\n                list = tagList.filter(function (tag) {\n                  return tag.id !== id;\n                });\n                setTagList(_toConsumableArray(list));\n              }\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleDeleteTag(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var _useTheme = useTheme(),\n      palette = _useTheme.palette;\n\n  var bgError = palette.error.main;\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    onClose: handleClose,\n    open: open,\n    maxWidth: \"xs\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      px: 2,\n      py: 3,\n      children: [/*#__PURE__*/_jsxDEV(FlexBox, {\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          size: \"small\",\n          onChange: handleChange,\n          onKeyDown: handleChange,\n          value: name,\n          label: \"New tag*\",\n          sx: {\n            flexGrow: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleAddNewTag,\n            variant: \"contained\",\n            color: \"primary\",\n            children: \"Add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(Box, {\n        pt: 2,\n        children: tagList.map(function (tag, index) {\n          return /*#__PURE__*/_jsxDEV(JustifyBox, {\n            my: 1,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: index + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 29\n            }, _this), /*#__PURE__*/_jsxDEV(Span, {\n              sx: {\n                textTransform: 'capitalize'\n              },\n              children: tag.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, _this), /*#__PURE__*/_jsxDEV(Button, {\n              onClickCapture: function onClickCapture() {\n                return handleDeleteTag(tag.id);\n              },\n              variant: \"contained\",\n              sx: {\n                background: bgError\n              },\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, _this)]\n          }, tag.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(Box, {\n        pt: 2,\n        textAlign: \"right\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClose,\n          variant: \"outlined\",\n          color: \"secondary\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(TagDialog, \"XnwwRZsCl15B9NoUKRa7yxrUrRg=\", false, function () {\n  return [useTheme];\n});\n\n_c = TagDialog;\nexport default TagDialog;\n\nvar _c;\n\n$RefreshReg$(_c, \"TagDialog\");","map":{"version":3,"sources":["/Users/zhaoyuliu/Desktop/matx-basic/src/app/views/todo/TagDialog.jsx"],"names":["React","useState","useEffect","useCallback","Dialog","TextField","Button","getAllTodoTag","addNewTag","deleteTag","generateRandomId","Box","styled","useTheme","Span","FlexBox","display","alignItems","JustifyBox","justifyContent","TagDialog","open","handleClose","isAlive","setIsAlive","name","setName","tagList","setTagList","loadTagList","data","handleChange","event","key","handleAddNewTag","target","value","trim","id","tag","list","push","handleDeleteTag","filter","palette","bgError","error","main","flexGrow","map","index","textTransform","background"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\r\nimport { Dialog, TextField, Button } from '@mui/material'\r\nimport { getAllTodoTag, addNewTag, deleteTag } from './TodoService'\r\nimport { generateRandomId } from 'app/utils/utils'\r\nimport { Box, styled, useTheme } from '@mui/system'\r\nimport { Span } from 'app/components/Typography'\r\n\r\nconst FlexBox = styled(Box)(() => ({\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n}))\r\n\r\nconst JustifyBox = styled(FlexBox)(() => ({\r\n    justifyContent: 'space-between',\r\n}))\r\n\r\nconst TagDialog = ({ open, handleClose }) => {\r\n    const [isAlive, setIsAlive] = useState(true)\r\n    const [name, setName] = useState('')\r\n    const [tagList, setTagList] = useState([])\r\n\r\n    const loadTagList = useCallback(async () => {\r\n        let { data } = await getAllTodoTag()\r\n        if (isAlive) setTagList(data)\r\n    }, [isAlive])\r\n\r\n    useEffect(() => {\r\n        loadTagList()\r\n        return () => setIsAlive(false)\r\n    }, [loadTagList])\r\n\r\n    useEffect(() => {\r\n        return () => setIsAlive(false)\r\n    }, [])\r\n\r\n    const handleChange = (event) => {\r\n        if (event.key === 'Enter') {\r\n            handleAddNewTag()\r\n        } else {\r\n            setName(event.target.value)\r\n        }\r\n    }\r\n\r\n    const handleAddNewTag = async (event) => {\r\n        if (name.trim() !== '') {\r\n            let { data: tag } = await addNewTag({\r\n                id: generateRandomId(),\r\n                name: name.trim(),\r\n            })\r\n\r\n            if (isAlive) {\r\n                let list = [...tagList]\r\n                list.push(tag)\r\n\r\n                setTagList(list)\r\n                setName('')\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleDeleteTag = async (id) => {\r\n        await deleteTag({ id, name })\r\n        if (isAlive) {\r\n            let list = tagList.filter((tag) => tag.id !== id)\r\n            setTagList([...list])\r\n        }\r\n    }\r\n\r\n    const { palette } = useTheme()\r\n    const bgError = palette.error.main\r\n\r\n    return (\r\n        <Dialog onClose={handleClose} open={open} maxWidth=\"xs\">\r\n            <Box px={2} py={3}>\r\n                <FlexBox>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        size=\"small\"\r\n                        onChange={handleChange}\r\n                        onKeyDown={handleChange}\r\n                        value={name}\r\n                        label=\"New tag*\"\r\n                        sx={{ flexGrow: 1 }}\r\n                    />\r\n                    <div>\r\n                        <Button\r\n                            onClick={handleAddNewTag}\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                        >\r\n                            Add\r\n                        </Button>\r\n                    </div>\r\n                </FlexBox>\r\n                <Box pt={2}>\r\n                    {tagList.map((tag, index) => (\r\n                        <JustifyBox my={1} key={tag.id}>\r\n                            <span>{index + 1}</span>\r\n                            <Span sx={{ textTransform: 'capitalize' }}>\r\n                                {tag.name}\r\n                            </Span>\r\n                            <Button\r\n                                onClickCapture={() => handleDeleteTag(tag.id)}\r\n                                variant=\"contained\"\r\n                                sx={{ background: bgError }}\r\n                            >\r\n                                Delete\r\n                            </Button>\r\n                        </JustifyBox>\r\n                    ))}\r\n                </Box>\r\n                <Box pt={2} textAlign=\"right\">\r\n                    <Button\r\n                        onClick={handleClose}\r\n                        variant=\"outlined\"\r\n                        color=\"secondary\"\r\n                    >\r\n                        Close\r\n                    </Button>\r\n                </Box>\r\n            </Box>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default TagDialog\r\n"]},"metadata":{},"sourceType":"module"}