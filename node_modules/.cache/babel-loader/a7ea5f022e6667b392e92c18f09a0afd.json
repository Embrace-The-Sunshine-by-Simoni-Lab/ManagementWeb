{"ast":null,"code":"import _toConsumableArray from \"/Users/zhaoyuliu/Desktop/matx-pro-3.3.0/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/zhaoyuliu/Desktop/matx-pro-3.3.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _defineProperty from \"/Users/zhaoyuliu/Desktop/matx-pro-3.3.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n\nvar _jsxFileName = \"/Users/zhaoyuliu/Desktop/matx-pro-3.3.0/src/app/views/ecommerce/Shop.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { MatxSidenavContainer, MatxSidenav, MatxSidenavContent } from 'app/components';\nimport { getProductList, getCategoryList, getRatingList, getBrandList } from 'app/redux/actions/EcommerceActions';\nimport { debounce } from 'lodash';\nimport { styled } from '@mui/system';\nimport ShopSidenav from './ShopSidenav';\nimport ShopContainer from './ShopContainer';\nimport { useDispatch, useSelector } from 'react-redux';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ShopRoot = styled('div')(function (_ref) {\n  var theme = _ref.theme;\n  return _defineProperty({\n    margin: '30px'\n  }, theme.breakpoints.down('sm'), {\n    margin: '16px'\n  });\n});\n\nvar Shop = function Shop() {\n  _s();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState('grid'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      view = _useState4[0],\n      setView = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      page = _useState6[0],\n      setPage = _useState6[1];\n\n  var _useState7 = useState(6),\n      _useState8 = _slicedToArray(_useState7, 2),\n      rowsPerPage = _useState8[0],\n      _setRowsPerPage = _useState8[1];\n\n  var _useState9 = useState('default'),\n      _useState10 = _slicedToArray(_useState9, 2),\n      orderBy = _useState10[0],\n      setOrderBy = _useState10[1];\n\n  var _useState11 = useState([0, 100]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      sliderRange = _useState12[0],\n      setSliderRange = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      query = _useState14[0],\n      setQuery = _useState14[1];\n\n  var _useState15 = useState('all'),\n      _useState16 = _slicedToArray(_useState15, 2),\n      multilevel = _useState16[0],\n      setMultilevel = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      shipping = _useState18[0],\n      setShipping = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      categories = _useState20[0],\n      setCategories = _useState20[1];\n\n  var _useState21 = useState([]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      brands = _useState22[0],\n      setBrands = _useState22[1];\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      filteredProductList = _useState24[0],\n      setFilteredProductList = _useState24[1];\n\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.ecommerce;\n  }),\n      _useSelector$productL = _useSelector.productList,\n      productList = _useSelector$productL === void 0 ? [] : _useSelector$productL;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.ecommerce;\n  }),\n      _useSelector2$categor = _useSelector2.categoryList,\n      categoryList = _useSelector2$categor === void 0 ? [] : _useSelector2$categor;\n\n  var _useSelector3 = useSelector(function (state) {\n    return state.ecommerce;\n  }),\n      _useSelector3$ratingL = _useSelector3.ratingList,\n      ratingList = _useSelector3$ratingL === void 0 ? [] : _useSelector3$ratingL;\n\n  var _useSelector4 = useSelector(function (state) {\n    return state.ecommerce;\n  }),\n      _useSelector4$brandLi = _useSelector4.brandList,\n      brandList = _useSelector4$brandLi === void 0 ? [] : _useSelector4$brandLi;\n\n  var toggleSidenav = function toggleSidenav() {\n    setOpen(!open);\n  };\n\n  var handleSliderChange = function handleSliderChange(event, newValue) {\n    setSliderRange(newValue);\n    filterProductOnPriceRange(newValue[0] * 10, newValue[1] * 10);\n  };\n\n  var handleChangePage = function handleChangePage(event, newPage) {\n    setPage(newPage);\n  };\n\n  var toggleView = function toggleView(view) {\n    return setView(view);\n  };\n\n  var handleSearch = function handleSearch(query) {\n    setQuery(query);\n    search(query);\n  }; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  var search = useCallback(debounce(function (query) {\n    var tempList = productList.filter(function (product) {\n      return product.title.toLowerCase().match(query.toLowerCase());\n    });\n    setFilteredProductList(tempList);\n  }, 200), [productList]);\n\n  var handleMultilevelChange = function handleMultilevelChange(event) {\n    var eventValue = event.target.value;\n    var range = eventValue.split(',');\n    setMultilevel(eventValue);\n\n    if (eventValue === 'all') {\n      setFilteredProductList(productList);\n      return;\n    }\n\n    range = range.map(function (value) {\n      return parseInt(value);\n    });\n\n    if (range.length === 2) {\n      filterProductOnPriceRange(range[0], range[1]);\n    } else {\n      var tempList = productList.filter(function (product) {\n        return product.price >= range[0];\n      });\n      setFilteredProductList(tempList);\n    }\n  };\n\n  var handleCategoryChange = function handleCategoryChange(event) {\n    var target = event.target;\n    var tempCategories = [];\n\n    if (target.checked) {\n      tempCategories = [].concat(_toConsumableArray(categories), [target.name]);\n    } else {\n      tempCategories = categories.filter(function (item) {\n        return item !== target.name;\n      });\n    }\n\n    setCategories(tempCategories);\n    setFilteredProductList(filterProductOnProperty('category', tempCategories));\n  };\n\n  var handleBrandChange = function handleBrandChange(event) {\n    var target = event.target;\n    var tempBrands = [];\n\n    if (target.checked) {\n      tempBrands = [].concat(_toConsumableArray(brands), [target.name]);\n    } else {\n      tempBrands = brands.filter(function (item) {\n        return item !== target.name;\n      });\n    }\n\n    setBrands(tempBrands);\n    setFilteredProductList(filterProductOnProperty('brand', tempBrands));\n  };\n\n  var handleRatingClick = function handleRatingClick(rate) {\n    setFilteredProductList(filterProductOnProperty('rating', [rate]));\n  };\n\n  var handleFreeShippingClick = function handleFreeShippingClick() {\n    setShipping(!shipping);\n    setFilteredProductList(filterProductOnProperty('freeShipping', [shipping]));\n  };\n\n  var filterProductOnProperty = function filterProductOnProperty(property) {\n    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    if (value.length === 0) {\n      return productList;\n    }\n\n    return productList.filter(function (product) {\n      return value.includes(product[property]);\n    });\n  };\n\n  var filterProductOnPriceRange = function filterProductOnPriceRange(lowestPrice, highestPrice) {\n    var tempList = productList.filter(function (product) {\n      return product.price >= lowestPrice && product.price <= highestPrice;\n    });\n    setFilteredProductList(tempList);\n  };\n\n  var handleClearAllFilter = function handleClearAllFilter() {\n    setSliderRange([0, 100]);\n    setQuery('');\n    setMultilevel('all');\n    setShipping(false);\n    setCategories([]);\n    setBrands([]);\n    setFilteredProductList(productList);\n  };\n\n  useEffect(function () {\n    dispatch(getProductList());\n    dispatch(getCategoryList());\n    dispatch(getRatingList());\n    dispatch(getBrandList());\n  }, [dispatch]);\n  useEffect(function () {\n    setFilteredProductList(productList);\n  }, [productList]);\n  return /*#__PURE__*/_jsxDEV(ShopRoot, {\n    className: \"shop\",\n    children: /*#__PURE__*/_jsxDEV(MatxSidenavContainer, {\n      children: [/*#__PURE__*/_jsxDEV(MatxSidenav, {\n        width: \"288px\",\n        open: open,\n        toggleSidenav: toggleSidenav,\n        children: /*#__PURE__*/_jsxDEV(ShopSidenav, {\n          query: query,\n          categories: categories,\n          brands: brands,\n          multilevel: multilevel,\n          categoryList: categoryList,\n          brandList: brandList,\n          ratingList: ratingList,\n          shipping: shipping,\n          sliderRange: sliderRange,\n          toggleSidenav: toggleSidenav,\n          handleSearch: handleSearch,\n          handleMultilevelChange: handleMultilevelChange,\n          handleSliderChange: handleSliderChange,\n          handleCategoryChange: handleCategoryChange,\n          handleBrandChange: handleBrandChange,\n          handleRatingClick: handleRatingClick,\n          handleFreeShippingClick: handleFreeShippingClick,\n          handleClearAllFilter: handleClearAllFilter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(MatxSidenavContent, {\n        children: /*#__PURE__*/_jsxDEV(ShopContainer, {\n          orderBy: orderBy,\n          view: view,\n          productList: filteredProductList,\n          page: page,\n          rowsPerPage: rowsPerPage,\n          toggleView: toggleView,\n          toggleSidenav: toggleSidenav,\n          handleChange: function handleChange(e) {\n            return setOrderBy(e.target.value);\n          },\n          handleChangePage: handleChangePage,\n          setRowsPerPage: function setRowsPerPage(e) {\n            return _setRowsPerPage(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Shop, \"FFMfU4gQlH4Ogtk4kCRs08i3szo=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Shop;\nexport default Shop;\n\nvar _c;\n\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"sources":["/Users/zhaoyuliu/Desktop/matx-pro-3.3.0/src/app/views/ecommerce/Shop.jsx"],"names":["MatxSidenavContainer","MatxSidenav","MatxSidenavContent","getProductList","getCategoryList","getRatingList","getBrandList","debounce","styled","ShopSidenav","ShopContainer","useDispatch","useSelector","React","useState","useEffect","useCallback","ShopRoot","theme","margin","breakpoints","down","Shop","open","setOpen","view","setView","page","setPage","rowsPerPage","setRowsPerPage","orderBy","setOrderBy","sliderRange","setSliderRange","query","setQuery","multilevel","setMultilevel","shipping","setShipping","categories","setCategories","brands","setBrands","filteredProductList","setFilteredProductList","dispatch","state","ecommerce","productList","categoryList","ratingList","brandList","toggleSidenav","handleSliderChange","event","newValue","filterProductOnPriceRange","handleChangePage","newPage","toggleView","handleSearch","search","tempList","filter","product","title","toLowerCase","match","handleMultilevelChange","eventValue","target","value","range","split","map","parseInt","length","price","handleCategoryChange","tempCategories","checked","name","item","filterProductOnProperty","handleBrandChange","tempBrands","handleRatingClick","rate","handleFreeShippingClick","property","includes","lowestPrice","highestPrice","handleClearAllFilter","e"],"mappings":"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","sourcesContent":["import {\n    MatxSidenavContainer,\n    MatxSidenav,\n    MatxSidenavContent,\n} from 'app/components'\nimport {\n    getProductList,\n    getCategoryList,\n    getRatingList,\n    getBrandList,\n} from 'app/redux/actions/EcommerceActions'\nimport { debounce } from 'lodash'\nimport { styled } from '@mui/system'\nimport ShopSidenav from './ShopSidenav'\nimport ShopContainer from './ShopContainer'\nimport { useDispatch, useSelector } from 'react-redux'\nimport React, { useState, useEffect, useCallback } from 'react'\n\nconst ShopRoot = styled('div')(({ theme }) => ({\n    margin: '30px',\n    [theme.breakpoints.down('sm')]: {\n        margin: '16px',\n    },\n}))\n\nconst Shop = () => {\n    const [open, setOpen] = useState(true)\n    const [view, setView] = useState('grid')\n    const [page, setPage] = useState(0)\n    const [rowsPerPage, setRowsPerPage] = useState(6)\n    const [orderBy, setOrderBy] = useState('default')\n    const [sliderRange, setSliderRange] = useState([0, 100])\n    const [query, setQuery] = useState('')\n    const [multilevel, setMultilevel] = useState('all')\n    const [shipping, setShipping] = useState(false)\n    const [categories, setCategories] = useState([])\n    const [brands, setBrands] = useState([])\n    const [filteredProductList, setFilteredProductList] = useState([])\n\n    const dispatch = useDispatch()\n    const { productList = [] } = useSelector((state) => state.ecommerce)\n    const { categoryList = [] } = useSelector((state) => state.ecommerce)\n    const { ratingList = [] } = useSelector((state) => state.ecommerce)\n    const { brandList = [] } = useSelector((state) => state.ecommerce)\n\n    const toggleSidenav = () => {\n        setOpen(!open)\n    }\n\n    const handleSliderChange = (event, newValue) => {\n        setSliderRange(newValue)\n        filterProductOnPriceRange(newValue[0] * 10, newValue[1] * 10)\n    }\n\n    const handleChangePage = (event, newPage) => {\n        setPage(newPage)\n    }\n\n    const toggleView = (view) => setView(view)\n\n    const handleSearch = (query) => {\n        setQuery(query)\n        search(query)\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const search = useCallback(\n        debounce((query) => {\n            let tempList = productList.filter((product) =>\n                product.title.toLowerCase().match(query.toLowerCase())\n            )\n\n            setFilteredProductList(tempList)\n        }, 200),\n        [productList]\n    )\n\n    const handleMultilevelChange = (event) => {\n        let eventValue = event.target.value\n        let range = eventValue.split(',')\n\n        setMultilevel(eventValue)\n\n        if (eventValue === 'all')\n        {\n            setFilteredProductList(productList)\n            return\n        }\n\n        range = range.map((value) => parseInt(value))\n\n        if (range.length === 2)\n        {\n            filterProductOnPriceRange(range[0], range[1])\n        } else\n        {\n            let tempList = productList.filter(\n                (product) => product.price >= range[0]\n            )\n            setFilteredProductList(tempList)\n        }\n    }\n\n    const handleCategoryChange = (event) => {\n        let target = event.target\n        let tempCategories = []\n        if (target.checked)\n        {\n            tempCategories = [...categories, target.name]\n        } else\n        {\n            tempCategories = categories.filter((item) => item !== target.name)\n        }\n\n        setCategories(tempCategories)\n        setFilteredProductList(\n            filterProductOnProperty('category', tempCategories)\n        )\n    }\n\n    const handleBrandChange = (event) => {\n        let target = event.target\n        let tempBrands = []\n        if (target.checked)\n        {\n            tempBrands = [...brands, target.name]\n        } else\n        {\n            tempBrands = brands.filter((item) => item !== target.name)\n        }\n        setBrands(tempBrands)\n        setFilteredProductList(filterProductOnProperty('brand', tempBrands))\n    }\n\n    const handleRatingClick = (rate) => {\n        setFilteredProductList(filterProductOnProperty('rating', [rate]))\n    }\n\n    const handleFreeShippingClick = () => {\n        setShipping(!shipping)\n        setFilteredProductList(\n            filterProductOnProperty('freeShipping', [shipping])\n        )\n    }\n\n    const filterProductOnProperty = (property, value = []) => {\n        if (value.length === 0)\n        {\n            return productList\n        }\n        return productList.filter((product) =>\n            value.includes(product[property])\n        )\n    }\n\n    const filterProductOnPriceRange = (lowestPrice, highestPrice) => {\n        let tempList = productList.filter(\n            (product) =>\n                product.price >= lowestPrice && product.price <= highestPrice\n        )\n        setFilteredProductList(tempList)\n    }\n\n    const handleClearAllFilter = () => {\n        setSliderRange([0, 100])\n        setQuery('')\n        setMultilevel('all')\n        setShipping(false)\n        setCategories([])\n        setBrands([])\n        setFilteredProductList(productList)\n    }\n\n    useEffect(() => {\n        dispatch(getProductList())\n        dispatch(getCategoryList())\n        dispatch(getRatingList())\n        dispatch(getBrandList())\n    }, [dispatch])\n\n    useEffect(() => {\n        setFilteredProductList(productList)\n    }, [productList])\n\n    return (\n        <ShopRoot className=\"shop\">\n            <MatxSidenavContainer>\n                <MatxSidenav\n                    width=\"288px\"\n                    open={open}\n                    toggleSidenav={toggleSidenav}\n                >\n                    <ShopSidenav\n                        query={query}\n                        categories={categories}\n                        brands={brands}\n                        multilevel={multilevel}\n                        categoryList={categoryList}\n                        brandList={brandList}\n                        ratingList={ratingList}\n                        shipping={shipping}\n                        sliderRange={sliderRange}\n                        toggleSidenav={toggleSidenav}\n                        handleSearch={handleSearch}\n                        handleMultilevelChange={handleMultilevelChange}\n                        handleSliderChange={handleSliderChange}\n                        handleCategoryChange={handleCategoryChange}\n                        handleBrandChange={handleBrandChange}\n                        handleRatingClick={handleRatingClick}\n                        handleFreeShippingClick={handleFreeShippingClick}\n                        handleClearAllFilter={handleClearAllFilter}\n                    ></ShopSidenav>\n                </MatxSidenav>\n                <MatxSidenavContent>\n                    <ShopContainer\n                        orderBy={orderBy}\n                        view={view}\n                        productList={filteredProductList}\n                        page={page}\n                        rowsPerPage={rowsPerPage}\n                        toggleView={toggleView}\n                        toggleSidenav={toggleSidenav}\n                        handleChange={(e) => setOrderBy(e.target.value)}\n                        handleChangePage={handleChangePage}\n                        setRowsPerPage={(e) => setRowsPerPage(e.target.value)}\n                    ></ShopContainer>\n                </MatxSidenavContent>\n            </MatxSidenavContainer>\n        </ShopRoot>\n    )\n}\n\nexport default Shop\n"]},"metadata":{},"sourceType":"module"}